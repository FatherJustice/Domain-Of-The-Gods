if not game:IsLoaded() then
    game.Loaded:Wait()
end
wait()

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local Player = Players.LocalPlayer

-- Variables for power management
local OldPercentage = 100
local Power = 100

-- Function to set power percentage
local function setPowerPercentage(Percentage)
    if tonumber(Percentage) > OldPercentage then
        repeat
            Power = Power + 5
            Player.Backpack.ServerTraits.Input:FireServer({"increase"}, true)
        until Power >= tonumber(Percentage)
    elseif tonumber(Percentage) < OldPercentage then
        repeat
            Power = Power - 5
            Player.Backpack.ServerTraits.Input:FireServer({"decrease"}, true)
        until Power <= tonumber(Percentage)
    end
    OldPercentage = tonumber(Percentage)
    print("Power set to:", Percentage)
end

-- Listen for key presses to adjust power
UserInputService.InputBegan:Connect(function(input, gameProcessedEvent)
    if not gameProcessedEvent then
        if input.KeyCode == Enum.KeyCode.LeftBracket then
            setPowerPercentage(5) -- Set power to 5%
        elseif input.KeyCode == Enum.KeyCode.RightBracket then
            setPowerPercentage(100) -- Set power to 100%
        elseif input.KeyCode == Enum.KeyCode.Semicolon then
            setPowerPercentage(75) -- Set power to 75%
        elseif input.KeyCode == Enum.KeyCode.Comma then
            setPowerPercentage(50) -- Set power to 50%
        end
    end
end)
